(function(a){a.fn.viewportChecker=function(b){var d={classToAdd:"visible",classToRemove:"invisible",classToAddForFullView:"full-visible",removeClassAfterAnimation:false,offset:100,repeat:false,invertBottomOffset:true,callbackFunction:function(f,g){},scrollHorizontal:false,scrollBox:window};a.extend(d,b);var c=this,e={height:a(d.scrollBox).height(),width:a(d.scrollBox).width()};this.checkElements=function(){var g,f;if(!d.scrollHorizontal){g=Math.max(a("html").scrollTop(),a("body").scrollTop(),a(window).scrollTop());f=(g+e.height);}else{g=Math.max(a("html").scrollLeft(),a("body").scrollLeft(),a(window).scrollLeft());f=(g+e.width);}c.each(function(){var n=a(this),j={},m={};if(n.data("vp-add-class")){m.classToAdd=n.data("vp-add-class");}if(n.data("vp-remove-class")){m.classToRemove=n.data("vp-remove-class");}if(n.data("vp-add-class-full-view")){m.classToAddForFullView=n.data("vp-add-class-full-view");}if(n.data("vp-keep-add-class")){m.removeClassAfterAnimation=n.data("vp-remove-after-animation");}if(n.data("vp-offset")){m.offset=n.data("vp-offset");}if(n.data("vp-repeat")){m.repeat=n.data("vp-repeat");}if(n.data("vp-scrollHorizontal")){m.scrollHorizontal=n.data("vp-scrollHorizontal");}if(n.data("vp-invertBottomOffset")){m.scrollHorizontal=n.data("vp-invertBottomOffset");}a.extend(j,d);a.extend(j,m);if(n.data("vp-animated")&&!j.repeat){return;}if(String(j.offset).indexOf("%")>0){j.offset=(parseInt(j.offset)/100)*e.height;}var l=(!j.scrollHorizontal)?n.offset().top:n.offset().left,h=(!j.scrollHorizontal)?l+n.height():l+n.width();var k=Math.round(l)+j.offset,i=(!j.scrollHorizontal)?k+n.height():k+n.width();if(j.invertBottomOffset){i-=(j.offset*2);}if((k<f)&&(i>g)){n.removeClass(j.classToRemove);n.addClass(j.classToAdd);j.callbackFunction(n,"add");if(h<=f&&l>=g){n.addClass(j.classToAddForFullView);}else{n.removeClass(j.classToAddForFullView);}n.data("vp-animated",true);if(j.removeClassAfterAnimation){n.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.removeClass(j.classToAdd);});}}else{if(n.hasClass(j.classToAdd)&&(j.repeat)){n.removeClass(j.classToAdd+" "+j.classToAddForFullView);j.callbackFunction(n,"remove");n.data("vp-animated",false);}}});};if("ontouchstart" in window||"onmsgesturechange" in window){a(document).bind("touchmove MSPointerMove pointermove",this.checkElements);}a(d.scrollBox).bind("load scroll",this.checkElements);a(window).resize(function(f){e={height:a(d.scrollBox).height(),width:a(d.scrollBox).width()};c.checkElements();});this.checkElements();return this;};})(jQuery);